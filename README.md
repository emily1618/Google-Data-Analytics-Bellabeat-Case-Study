# CASE STUDY: Bellabeat Fitness Data Analysis

##### Author: Emily Liang

##### Date: October 5, 2021

#

_The case study follows the six step data analysis process:_

### ‚ùì [Ask](#1-ask)
### üíª [Prepare](#2-prepare)
### üõ† [Process](#3-process)
### üìä [Analyze](#4-analyze)
### üìã [Share](#5-share)
### üö≤ [Act](#6-act)

## Scenario
Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned itself as a tech-driven wellness company for women. The company has 5 focus products: bellabeat app, leaf, time, spring and bellabeat membership. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Our team have been asked to analyze smart device data to gain insight into how consumers are using their smart devices. The insights we discover will then help guide marketing strategy for the company. 

## 1. Ask
üí° **BUSINESS TASK: Analyze Fitbit data to gain insight and help guide marketing strategy for Bellabeat to grow as a global player. **

Primary stakeholders: Ur≈°ka Sr≈°en and Sando Mur, executive team members.

Secondary stakeholders: Bellabeat marketing analytics team.

## 2. Prepare 
Data Source: 30 participants FitBit Fitness Tracker Data from Mobius: https://www.kaggle.com/arashnic/fitbit

The dataset has 18 CSV. The data also follow a ROCCC approach:

- Reliability: The data is from 30 FitBit users who consented to the submission of personal tracker data and generated by from a distributed survey via Amazon Mechanical Turk. 
- Original: The data is from 30 FitBit users who consented to the submission of personal tracker data via Amazon  Mechanical Turk.
- Comprehensive: Data minute-level output for physical activity, heart rate, and sleep monitoring. While the data tracks many factors in the user activity and sleep, but the sample size is small. 
- Current: Data is from March 2016 to May 2016. Data is not current so the users habit may be different now. 
- Cited: Unknown. 

‚õî The dataset has limitations:

- Only 30 user data is available. The central limit theorem general rule of n‚â•30 applies and we can use the t test for statstic reference. However, a larger sample size is preferred for the analysis.
- Upon further investigation with ```n_distinct()``` to check for unique user Id, the set has 33 user data from daily activity, 24 from sleep and only 8 from weight. There are 3 extra users and some users did not record their data for tracking daily activity and sleep. 
- For the 8 user data for weight, 5 users manually entered their weight and 3 recorded via a connected wifi device (eg: wifi scale).

## 3. Process

Examine the data, check for NA, and remove duplicates for three main tables: daily_activity, sleep_day and weight:
```
dim(sleep_day)
sum(is.na(sleep_day))
sum(duplicated(sleep_day))
sleep_day <- sleep_day[!duplicated(sleep_day), ]
```
Check to see if we have 30 users. If there is a discrepency such as in the weight table, check to see how the data are recorded. The way the user record the data may give you insight on why there is missing data. 
```
n_distinct(weight$Id)

weight %>% 
  filter(IsManualReport == "True") %>% 
  group_by(Id) %>% 
  summarise("Manual Weight Report"=n()) %>%
  distinct()
 ```

Merge the three tables:
```
merged_data <- merge(merged_activity_sleep, weight, by = c("Id"), all=TRUE)
```
Convert ActivityDate into date format and add a column for day of the week:
```
daily_activity <- daily_activity %>% mutate( Weekday = weekdays(as.Date(ActivityDate, "%m/%d/%Y")))
```
Optional: convert sleep time to hours:
```
sleep_day$TotalMinutesAsleep <- sleep_day$TotalMinutesAsleep/60
sleep_day$TotalTimeInBed <- sleep_day$TotalTimeInBed/60
```

Clean the data to prepare for analysis in 4. Analyze!

## 4. Analyze

Check min, max, mean, median and any outliers. 
```
merged_data %>%
  dplyr::select(Weekday,
         TotalSteps,
         TotalDistance,
         VeryActiveMinutes,
         FairlyActiveMinutes,
         LightlyActiveMinutes,
         SedentaryMinutes,
         Calories,
         TotalMinutesAsleep,
         TotalTimeInBed,
         WeightPounds,
         BMI
         ) %>%
  summary()
```

Percentage of active minutes in the four categories: very active, fairly active, lightly active and sedentary. From the pie chart, we can see that most users spent 81.3% of their daily activity in sedentary minutes and only 1.74% in very active minutes. 
```
percentage <- data.frame(
  level=c("Sedentary", "Lightly", "Fairly", "Very Active"),
  minutes=c(sedentary_percentage,lightly_percentage,fairly_percentage,active_percentage)
)

plot_ly(percentage, labels = ~level, values = ~minutes, type = 'pie',textposition = 'outside',textinfo = 'label+percent') %>%
  layout(title = 'Activity Level Minutes',
         xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
         yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
```

![newplot](https://user-images.githubusercontent.com/62857660/136103632-9ad99673-0760-4e07-9e5a-c8cf5dc5898b.png)

Let's look at the data further and plot data using ```ggplot()```. The more active that you're, the more steps you take, and the more calories you will burn. This is an obvious fact, but we can still look into the data to find any interesting facts. Here we see that some users who are sedentary, take minimal steps, but still able to burn over 1500 to 2500 calories compare to users who are more active, take more steps, but still burn similar calories.

![image](https://user-images.githubusercontent.com/62857660/136102960-b155ccd5-cd82-46c2-a81c-7cbefe79a544.png)


Let's look at the BMI. Users who take more steps, burn more calories, and has lower BMI. We also see some outliers in the top left corner. Due to the small sample size with missing sleep data, the outliers may be a data error or leverage points we need to investigate.  
![image](https://user-images.githubusercontent.com/62857660/136102974-6df1f5f0-dc32-4ff7-93b8-de23935dbe9c.png)

Now for the sleep date, according to article: [Fitbit Sleep Study](https://blog.fitbit.com/sleep-study/#:~:text=The%20average%20Fitbit%20user%20is,is%20spent%20restless%20or%20awake.&text=People%20who%20sleep%205%20hours,the%20beginning%20of%20the%20night.), 55 minutes are spent awake in bed before going to sleep. We have 13 users in our dataset spend 55 minutes awake before alseep. 

```
awake_in_bed <- mutate(sleep_day, AwakeTime = TotalTimeInBed - TotalMinutesAsleep)
awake_in_bed <- awake_in_bed %>% 
  filter(AwakeTime >= 55) %>% 
  group_by(Id) %>% 
  arrange(AwakeTime) 
```

Using ```ggplot()``` again to plot the data, we see majority of the users sleep between 5 to 10 hours spent 7 to 24 hours in sedentary and only 0 to 2 hours in very active mode. The variables here do not correlate well. The plots just tell us userse on average sleep between 5 to 10 hours and their active minutes reflect the pie chart above: most minutes are spent in sedentary and little time spent on being very active.   
![image](https://user-images.githubusercontent.com/62857660/136106307-e381e182-dde8-4269-870b-6393b0e7a1c8.png)
![image](https://user-images.githubusercontent.com/62857660/136106327-0be2382f-81c2-4e80-8dd4-796f62468b1d.png)

Something we should also consider here: does the fitness data include sleep minutes as sedentary minutes? Let's take a look at the hourly plot. 

We can use regression analysis look at the R-squared, slope, p-value and intercept for different combinations of the data. For R-squared, 0% indicates that the model explains none of the variability of the response data around its mean. Higher % indicates that the model explains more of the variability of the response data around its mean. In layman's terms, how related are the data? Postive slope means variables increase/decrease with each other, and negative means one variable go up and the other go down. 

Postive slope with 27.88% R-squared:
```
calories_vs_steps.mod <- lm(Calories ~ TotalSteps, data = merged_data)
summary(calories_vs_steps.mod)
```
![calvssteps](https://user-images.githubusercontent.com/62857660/136107751-e1aba885-9475-4430-94cc-e56e39d0c380.PNG)

Negative slope with an very small R-squared. How many minutes an user sleep have an very weak correlation with their activity minutes in sedentary. 
```
sedentary_vs_sleep.mod <- lm(SedentaryMinutes ~ TotalMinutesAsleep, data = merged_data)
summary(sedentary_vs_sleep.mod)
```
![calvssteps2](https://user-images.githubusercontent.com/62857660/136107919-65c86392-4f12-4038-b3d3-09166d8d5381.PNG)

Editing...


## 5. Share 
Editing...

## 6. Act
Editing...









